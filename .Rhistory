),
pd = c(
bayestestR::rope(filter(wolf_priors_model_lnRR_slopes, site_centred == -0.25)$draw/2, range = c(3, Inf), ci = 1)$ROPE_Percentage,
bayestestR::rope(filter(wolf_priors_model_lnRR_slopes, site_centred == 0)$draw/2, range = c(3, Inf), ci = 1)$ROPE_Percentage,
bayestestR::rope(filter(wolf_priors_model_lnRR_slopes, site_centred == 0.25)$draw/2, range = c(3, Inf), ci = 1)$ROPE_Percentage
)
)
100*(exp(draw+0.5*tidy_wolf_priors_model_lnRR$estimate[7])-1)
100*(exp(tidy_wolf_priors_model_lnRR$estimate[7]+0.5*wolf_priors_model_total_var)-1)
targets::tar_load(tidy_uninformed_model_SMD)
targets::tar_load(tidy_wolf_priors_model_slopes_SMD)
targets::tar_load(tidy_wolf_priors_model_slopes_lnRR)
tidy_wolf_priors_model_slopes_SMD
dat <- tibble(
pre_prom_m = c(39.6,36.5,35.1,41.5),
post_prom_m = c(41.4,37.9,37,44.1),
pre_prom_sd = c(8.6,8.9,9.5,10.5),
post_prom_sd = c(7.8,8.5,9.7,10.3),
pre_prom_m = c(39.3,36.5,34.4,41.3),
post_prom_m = c(41.1,37.7,37.4,44.4),
pre_prom_sd = c(7.9,8.4,9.6,10.8),
post_prom_sd = c(7.6,8.5,9.5,10.5),
)
s
dat <- tibble(
pre_prom_m = c(39.6,36.5,35.1,41.5),
post_prom_m = c(41.4,37.9,37,44.1),
pre_prom_sd = c(8.6,8.9,9.5,10.5),
post_prom_sd = c(7.8,8.5,9.7,10.3),
pre_from_m = c(39.3,36.5,34.4,41.3),
post_from_m = c(41.1,37.7,37.4,44.4),
pre_from_sd = c(7.9,8.4,9.6,10.8),
post_from_sd = c(7.6,8.5,9.5,10.5),
)
prom <- tibble(
pre_prom_m = c(39.6,36.5,35.1,41.5),
post_prom_m = c(41.4,37.9,37,44.1),
pre_prom_sd = c(8.6,8.9,9.5,10.5),
post_prom_sd = c(7.8,8.5,9.7,10.3)
)
from <- tibble(
pre_from_m = c(39.3,36.5,34.4,41.3),
post_from_m = c(41.1,37.7,37.4,44.4),
pre_from_sd = c(7.9,8.4,9.6,10.8),
post_from_sd = c(7.6,8.5,9.5,10.5)
)
prom <- tibble(
pre_prom_m = c(39.6,36.5,35.1,41.5),
post_prom_m = c(41.4,37.9,37,44.1),
pre_prom_sd = c(8.6,8.9,9.5,10.5),
post_prom_sd = c(7.8,8.5,9.7,10.3),
ni = 30,
ri = 0.7
)
from <- tibble(
pre_from_m = c(39.3,36.5,34.4,41.3),
post_from_m = c(41.1,37.7,37.4,44.4),
pre_from_sd = c(7.9,8.4,9.6,10.8),
post_from_sd = c(7.6,8.5,9.5,10.5),
ni = 30,
ri = 0.7
)
prom <- tibble(
pre_prom_m = c(39.6,36.5,35.1,41.5),
post_prom_m = c(41.4,37.9,37,44.1),
pre_prom_sd = c(8.6,8.9,9.5,10.5),
post_prom_sd = c(7.8,8.5,9.7,10.3),
ni = 30,
ri = 0.7
)
from <- tibble(
pre_from_m = c(39.3,36.5,34.4,41.3),
post_from_m = c(41.1,37.7,37.4,44.4),
pre_from_sd = c(7.9,8.4,9.6,10.8),
post_from_sd = c(7.6,8.5,9.5,10.5),
ni = 30,
ri = 0.7
)
prom <- escalc(measure="SMCR", m1i=post_prom_m, m2i=pre_prom_m, sd1i=pre_prom_sd, ni=ni, ri=ri, data=prom)
prom <- metafor::escalc(measure="SMCR", m1i=post_prom_m, m2i=pre_prom_m, sd1i=pre_prom_sd, ni=ni, ri=ri, data=prom)
from <- metafor::escalc(measure="SMCR", m1i=post_prom_m, m2i=pre_prom_m, sd1i=pre_prom_sd, ni=ni, ri=ri, data=prom)
prom
from
from <- metafor::escalc(measure="SMCR", m1i=post_from_m, m2i=pre_from_m, sd1i=pre_from_sd, ni=ni, ri=ri, data=from)
from
prom <- metafor::escalc(measure="SMCR", m1i=post_prom_m, m2i=pre_prom_m, sd1i=pre_prom_sd, ni=ni, ri=ri, data=prom)
from <- metafor::escalc(measure="SMCR", m1i=post_from_m, m2i=pre_from_m, sd1i=pre_from_sd, ni=ni, ri=ri, data=from)
from <- tibble(
pre_from_m = c(39.3,36.5,34.4,41.3),
post_from_m = c(41.1,37.7,37.4,44.4),
pre_from_sd = c(7.9,8.4,9.6,10.8),
post_from_sd = c(7.6,8.5,9.5,10.5),
ni = 30,
ri = 0.7
)
prom <- metafor::escalc(measure="SMCR", m1i=post_prom_m, m2i=pre_prom_m, sd1i=pre_prom_sd, ni=ni, ri=ri, data=prom)
from <- metafor::escalc(measure="SMCR", m1i=post_from_m, m2i=pre_from_m, sd1i=pre_from_sd, ni=ni, ri=ri, data=from)
prom
from
tibble(
yi = from$yi - prom$yi,
vi = from$vi + prom$vi
)
tibble(
yi = from$yi - prom$yi,
conf.low = yi - 1.96 * ( from$vi + prom$vi)
)
tibble(
yi = from$yi - prom$yi,
conf.low = yi - 1.96 * ( from$vi + prom$vi),
conf.high = yi - 1.96 * ( from$vi + prom$vi)
)
tibble(
yi = from$yi - prom$yi,
conf.low = yi - 1.96 * ( from$vi + prom$vi),
conf.high = yi + 1.96 * ( from$vi + prom$vi)
)
tibble(
yi = from$yi - prom$yi,
conf.low = yi - 1.96 * ( sqrt(from$vi) + sqrt(prom$vi)),
conf.high = yi + 1.96 * ( from$vi + prom$vi)
)
tibble(
yi = from$yi - prom$yi,
conf.low = yi - 1.96 * (sqrt(from$vi) + sqrt(prom$vi)),
conf.high = yi + 1.96 * (sqrt(from$vi) + sqrt(prom$vi))
)
dat <- tibble(
yi = from$yi - prom$yi,
conf.low = yi - 1.96 * (sqrt(from$vi) + sqrt(prom$vi)),
conf.high = yi + 1.96 * (sqrt(from$vi) + sqrt(prom$vi))
)
dat <- tibble(
yi = from$yi - prom$yi,
conf.low = yi - 1.96 * (sqrt(from$vi) + sqrt(prom$vi)),
conf.high = yi + 1.96 * (sqrt(from$vi) + sqrt(prom$vi)),
effect = c(1,2,3,4)
)
dat <- tibble(
yi = from$yi - prom$yi,
vi = from$vi + prom$vi,
conf.low = yi - 1.96 * sqrt(vi),
conf.high = yi + 1.96 * sqrt(vi),
effect = c(1,2,3,4)
)
metafor::rma(yi, vi,
data = dat)
library(metafor)
forest(rma(yi, vi,
data = dat)
)
dat <- tibble(
yi = from$yi - prom$yi,
vi = from$vi + prom$vi,
conf.low = yi - 1.96 * sqrt(vi),
conf.high = yi + 1.96 * sqrt(vi),
effect = c(1,2,3,4),
label = c("Flexor (55%)",
"Flexor (45%)",
"Flexor (55%)",
"Extensor (45%)")
)
?rma
forest(rma(yi, vi,
data = dat,
slab = label)
)
dat <- tibble(
yi = from$yi - prom$yi,
vi = from$vi + prom$vi,
conf.low = yi - 1.96 * sqrt(vi),
conf.high = yi + 1.96 * sqrt(vi),
effect = c(1,2,3,4),
label = c("Flexor (55%)",
"Flexor (45%)",
"Extensor (55%)",
"Extensor (45%)")
)
forest(rma(yi, vi,
data = dat,
slab = label)
)
prom
from
targets::tar_visnetwork()
targets::tar_make()
data <- read.csv(here("data", "ROM_regional_hypertrophy_data.csv"), dec = ",")
list(
# Load in and prepare data
tar_target(file, here("data","ROM_regional_hypertrophy_data.csv"), format = "file"),
tar_target(data_SMD, read_prepare_data_SMD(file)),
tar_target(data_lnRR, read_prepare_data_lnRR(file)),
# Load in and prepare Wolf et al. (2023) data
tar_target(file_wolf, here("data","wolf_et_al_meta_data.csv"), format = "file"),
tar_target(data_wolf_SMD, read_prepare_wolf_data_SMD(file_wolf)),
tar_target(data_wolf_lnRR, read_prepare_wolf_data_lnRR(file_wolf)),
# Setup rstan to run chains in parallel
tar_target(rstan, rstan_setup()),
# Standardised Mean Change Models
# Fit, check, and plot pre-registered model with random slopes included with Wolf et al (2023) informed priors for Standarised Mean Changes
tar_target(wolf_priors_SMD, set_wolf_priors_SMD(data_wolf_SMD)),
tar_target(wolf_priors_only_model_SMD, fit_wolf_priors_only_model_SMD(data_SMD, wolf_priors_SMD)),
tar_target(wolf_priors_plot_SMD, sample_and_plot_priors_SMD(wolf_priors_only_model_SMD)),
tar_target(wolf_priors_model_SMD, fit_wolf_priors_model_SMD(data_SMD, wolf_priors_SMD)),
tar_target(rhat_wolf_priors_model_SMD, make_rhat_plot(wolf_priors_model_SMD)),
tar_target(trace_plot_wolf_priors_model_SMD, make_trace_plot(wolf_priors_model_SMD)),
tar_target(pp_check_wolf_priors_model_SMD, make_pp_check(wolf_priors_model_SMD)),
tar_target(wolf_priors_model_plot_preds_SMD, plot_main_model_preds_SMD(data_SMD, wolf_priors_model_SMD)),
tar_target(wolf_priors_model_plot_slopes_SMD, plot_main_model_slopes_SMD(wolf_priors_model_SMD)),
tar_target(combined_wolf_priors_model_plot_SMD, combine_main_model_plots(wolf_priors_model_plot_preds_SMD, wolf_priors_model_plot_slopes_SMD)),
tar_target(tidy_wolf_priors_model_SMD, get_tidy_model(wolf_priors_model_SMD)),
# Fit, check, and plot upper/lower model with uninformed priors
tar_target(upper_lower_model_SMD, fit_upper_lower_model(data_SMD,wolf_priors_SMD)),
tar_target(rhat_upper_lower_model_SMD, make_rhat_plot(upper_lower_model_SMD)),
tar_target(trace_plot_upper_lower_model_SMD, make_trace_plot(upper_lower_model_SMD)),
tar_target(pp_check_upper_lower_model_SMD, make_pp_check(upper_lower_model_SMD)),
tar_target(upper_lower_model_plot_preds_SMD, plot_upper_lower_model_preds_SMD(data_SMD, upper_lower_model_SMD)),
tar_target(tidy_upper_lower_model_SMD, get_tidy_model(upper_lower_model_SMD)),
# Fit, check, and plot muscle model with uninformed priors
tar_target(muscle_model_SMD, fit_muscle_model(data_SMD,wolf_priors_SMD)),
tar_target(rhat_muscle_model_SMD, make_rhat_plot(muscle_model_SMD)),
tar_target(trace_plot_muscle_model_SMD, make_trace_plot(muscle_model_SMD)),
tar_target(pp_check_muscle_model_SMD, make_pp_check(muscle_model_SMD)),
tar_target(muscle_model_plot_preds_SMD, plot_muscle_model_preds_SMD(data_SMD, muscle_model_SMD)),
tar_target(tidy_muscle_model_SMD, get_tidy_model(muscle_model_SMD)),
# Fit, check, and plot muscle action model with uninformed priors
tar_target(muscle_action_model_SMD, fit_muscle_action_model(data_SMD,wolf_priors_SMD)),
tar_target(rhat_muscle_action_model_SMD, make_rhat_plot(muscle_action_model_SMD)),
tar_target(trace_plot_muscle_action_model_SMD, make_trace_plot(muscle_action_model_SMD)),
tar_target(pp_check_muscle_action_model_SMD, make_pp_check(muscle_action_model_SMD)),
tar_target(muscle_action_model_plot_preds_SMD, plot_muscle_action_model_preds_SMD(data_SMD, muscle_action_model_SMD)),
tar_target(tidy_muscle_action_model_SMD, get_tidy_model(muscle_action_model_SMD)),
# Fit, check, and plot uninformed model with uninformed priors
tar_target(uninformed_model_SMD, fit_uninformed_model(data_SMD)),
tar_target(rhat_uninformed_model_SMD, make_rhat_plot(uninformed_model_SMD)),
tar_target(trace_plot_uninformed_model_SMD, make_trace_plot(uninformed_model_SMD)),
tar_target(pp_check_uninformed_model_SMD, make_pp_check(uninformed_model_SMD)),
tar_target(uninformed_model_plot_preds_SMD, plot_main_model_preds_SMD(data_SMD, uninformed_model_SMD)),
tar_target(uninformed_model_plot_slopes_SMD, plot_main_model_slopes_SMD(uninformed_model_SMD)),
tar_target(combined_uninformed_model_plot_SMD, combine_main_model_plots(uninformed_model_plot_preds_SMD, uninformed_model_plot_slopes_SMD)),
tar_target(tidy_uninformed_model_SMD, get_tidy_model(uninformed_model_SMD)),
# Fit, check, and plot pre-registered model with random slopes included with Wolf et al (2023) informed priors for Standarised Mean Changes
tar_target(wolf_priors_model_slopes_SMD, fit_wolf_priors_model_slopes_SMD(data_SMD, wolf_priors_SMD)),
tar_target(rhat_wolf_priors_model_slopes_SMD, make_rhat_plot(wolf_priors_model_slopes_SMD)),
tar_target(trace_plot_wolf_priors_model_slopes_SMD, make_trace_plot(wolf_priors_model_slopes_SMD)),
tar_target(pp_check_wolf_priors_model_slopes_SMD, make_pp_check(wolf_priors_model_slopes_SMD)),
tar_target(wolf_priors_model_slopes_plot_preds_SMD, plot_main_model_preds_SMD(data_SMD, wolf_priors_model_slopes_SMD)),
tar_target(wolf_priors_model_slopes_plot_slopes_SMD, plot_main_model_slopes_SMD(wolf_priors_model_slopes_SMD)),
tar_target(combined_wolf_priors_model_slopes_plot_SMD, combine_main_model_plots(wolf_priors_model_slopes_plot_preds_SMD, wolf_priors_model_slopes_plot_slopes_SMD)),
tar_target(tidy_wolf_priors_model_slopes_SMD, get_tidy_model(wolf_priors_model_slopes_SMD)),
# Fit, check, and plot uninformed model with random slopes included with James Steele's informed priors for Standarised Mean Changes
tar_target(wolf_steele_priors_only_model_SMD, fit_wolf_steele_priors_only_model_SMD(data_wolf_SMD)),
tar_target(wolf_steele_priors_model_SMD, fit_wolf_steele_priors_model_SMD(data_wolf_SMD)),
tar_target(comparison_wolf_steele_priors_SMD, compare_wolf_steele_priors_SMD(wolf_steele_priors_only_model_SMD,wolf_steele_priors_model_SMD)),
tar_target(steele_priors_SMD, set_steele_priors_SMD()),
tar_target(steele_priors_only_model_SMD, fit_steele_priors_only_model_SMD(data_SMD, steele_priors_SMD)),
tar_target(steele_priors_plot_SMD, sample_and_plot_priors_SMD(steele_priors_only_model_SMD)),
tar_target(steele_priors_model_SMD, fit_steele_priors_model_SMD(data_SMD, steele_priors_SMD)),
tar_target(rhat_steele_priors_model_SMD, make_rhat_plot(steele_priors_model_SMD)),
tar_target(trace_plot_steele_priors_model_SMD, make_trace_plot(steele_priors_model_SMD)),
tar_target(pp_check_steele_priors_model_SMD, make_pp_check(steele_priors_model_SMD)),
tar_target(steele_priors_model_plot_preds_SMD, plot_main_model_preds_SMD(data_SMD, steele_priors_model_SMD)),
tar_target(steele_priors_model_plot_slopes_SMD, plot_main_model_slopes_SMD(steele_priors_model_SMD)),
tar_target(combined_steele_priors_model_plot_SMD, combine_main_model_plots(steele_priors_model_plot_preds_SMD, steele_priors_model_plot_slopes_SMD)),
tar_target(tidy_steele_priors_model_SMD, get_tidy_model(steele_priors_model_SMD)),
# Fit, check, and plot uninformed model with random slopes included with other authors informed priors for Standarised Mean Changes
tar_target(authors_priors_SMD, set_authors_priors_SMD()),
tar_target(authors_priors_only_model_SMD, fit_authors_priors_only_model_SMD(data_SMD, authors_priors_SMD)),
tar_target(authors_priors_plot_SMD, sample_and_plot_priors_SMD(authors_priors_only_model_SMD)),
tar_target(authors_priors_model_SMD, fit_authors_priors_model_SMD(data_SMD, authors_priors_SMD)),
tar_target(rhat_authors_priors_model_SMD, make_rhat_plot(authors_priors_model_SMD)),
tar_target(trace_plot_authors_priors_model_SMD, make_trace_plot(authors_priors_model_SMD)),
tar_target(pp_check_authors_priors_model_SMD, make_pp_check(authors_priors_model_SMD)),
tar_target(authors_priors_model_plot_preds_SMD, plot_main_model_preds_SMD(data_SMD, authors_priors_model_SMD)),
tar_target(authors_priors_model_plot_slopes_SMD, plot_main_model_slopes_SMD(authors_priors_model_SMD)),
tar_target(combined_authors_priors_model_plot_SMD, combine_main_model_plots(authors_priors_model_plot_preds_SMD, authors_priors_model_plot_slopes_SMD)),
tar_target(tidy_authors_priors_model_SMD, get_tidy_model(authors_priors_model_SMD)),
# Compare Standardised Mean Difference Models
tar_target(BF_model_comparisons_plot_SMD, plot_BF_model_comparisons(wolf_priors_model_SMD,
uninformed_model_SMD,
wolf_priors_model_slopes_SMD,
steele_priors_model_SMD,
authors_priors_model_SMD)),
# Log Response Ratios Models
# Fit, check, and plot pre-registered model with random slopes included with Wolf et al (2023) informed priors for Standarised Mean Changes
tar_target(wolf_priors_lnRR, set_wolf_priors_lnRR(data_wolf_lnRR)),
tar_target(wolf_priors_only_model_lnRR, fit_wolf_priors_only_model_lnRR(data_lnRR, wolf_priors_lnRR)),
tar_target(wolf_priors_plot_lnRR, sample_and_plot_priors_lnRR(wolf_priors_only_model_lnRR)),
tar_target(wolf_priors_model_lnRR, fit_wolf_priors_model_lnRR(data_lnRR, wolf_priors_lnRR)),
tar_target(rhat_wolf_priors_model_lnRR, make_rhat_plot(wolf_priors_model_lnRR)),
tar_target(trace_plot_wolf_priors_model_lnRR, make_trace_plot(wolf_priors_model_lnRR)),
tar_target(pp_check_wolf_priors_model_lnRR, make_pp_check(wolf_priors_model_lnRR)),
tar_target(wolf_priors_model_plot_preds_lnRR, plot_main_model_preds_lnRR(data_lnRR, wolf_priors_model_lnRR)),
tar_target(wolf_priors_model_plot_slopes_lnRR, plot_main_model_slopes_lnRR(wolf_priors_model_lnRR)),
tar_target(combined_wolf_priors_model_plot_lnRR, combine_main_model_plots(wolf_priors_model_plot_preds_lnRR, wolf_priors_model_plot_slopes_lnRR)),
tar_target(tidy_wolf_priors_model_lnRR, get_tidy_model(wolf_priors_model_lnRR)),
# Fit, check, and plot upper/lower model with uninformed priors
tar_target(upper_lower_model_lnRR, fit_upper_lower_model(data_lnRR,wolf_priors_lnRR)),
tar_target(rhat_upper_lower_model_lnRR, make_rhat_plot(upper_lower_model_lnRR)),
tar_target(trace_plot_upper_lower_model_lnRR, make_trace_plot(upper_lower_model_lnRR)),
tar_target(pp_check_upper_lower_model_lnRR, make_pp_check(upper_lower_model_lnRR)),
tar_target(upper_lower_model_plot_preds_lnRR, plot_upper_lower_model_preds_lnRR(data_lnRR, upper_lower_model_lnRR)),
tar_target(tidy_upper_lower_model_lnRR, get_tidy_model(upper_lower_model_lnRR)),
# Fit, check, and plot muscle model with uninformed priors
tar_target(muscle_model_lnRR, fit_muscle_model(data_lnRR,wolf_priors_lnRR)),
tar_target(rhat_muscle_model_lnRR, make_rhat_plot(muscle_model_lnRR)),
tar_target(trace_plot_muscle_model_lnRR, make_trace_plot(muscle_model_lnRR)),
tar_target(pp_check_muscle_model_lnRR, make_pp_check(muscle_model_lnRR)),
tar_target(muscle_model_plot_preds_lnRR, plot_muscle_model_preds_lnRR(data_lnRR, muscle_model_lnRR)),
tar_target(tidy_muscle_model_lnRR, get_tidy_model(muscle_model_lnRR)),
# Fit, check, and plot muscle action model with uninformed priors
tar_target(muscle_action_model_lnRR, fit_muscle_action_model(data_lnRR,wolf_priors_lnRR)),
tar_target(rhat_muscle_action_model_lnRR, make_rhat_plot(muscle_action_model_lnRR)),
tar_target(trace_plot_muscle_action_model_lnRR, make_trace_plot(muscle_action_model_lnRR)),
tar_target(pp_check_muscle_action_model_lnRR, make_pp_check(muscle_action_model_lnRR)),
tar_target(muscle_action_model_plot_preds_lnRR, plot_muscle_action_model_preds_lnRR(data_lnRR, muscle_action_model_lnRR)),
tar_target(tidy_muscle_action_model_lnRR, get_tidy_model(muscle_action_model_lnRR)),
# Fit, check, and plot uninformed model with uninformed priors
tar_target(uninformed_model_lnRR, fit_uninformed_model(data_lnRR)),
tar_target(rhat_uninformed_model_lnRR, make_rhat_plot(uninformed_model_lnRR)),
tar_target(trace_plot_uninformed_model_lnRR, make_trace_plot(uninformed_model_lnRR)),
tar_target(pp_check_uninformed_model_lnRR, make_pp_check(uninformed_model_lnRR)),
tar_target(uninformed_model_plot_preds_lnRR, plot_main_model_preds_lnRR(data_lnRR, uninformed_model_lnRR)),
tar_target(uninformed_model_plot_slopes_lnRR, plot_main_model_slopes_lnRR(uninformed_model_lnRR)),
tar_target(combined_uninformed_model_plot_lnRR, combine_main_model_plots(uninformed_model_plot_preds_lnRR, uninformed_model_plot_slopes_lnRR)),
tar_target(tidy_uninformed_model_lnRR, get_tidy_model(uninformed_model_lnRR)),
# Fit, check, and plot pre-registered model with random slopes included with Wolf et al (2023) informed priors for Standarised Mean Changes
tar_target(wolf_priors_model_slopes_lnRR, fit_wolf_priors_model_slopes_lnRR(data_lnRR, wolf_priors_lnRR)),
tar_target(rhat_wolf_priors_model_slopes_lnRR, make_rhat_plot(wolf_priors_model_slopes_lnRR)),
tar_target(trace_plot_wolf_priors_model_slopes_lnRR, make_trace_plot(wolf_priors_model_slopes_lnRR)),
tar_target(pp_check_wolf_priors_model_slopes_lnRR, make_pp_check(wolf_priors_model_slopes_lnRR)),
tar_target(wolf_priors_model_slopes_plot_preds_lnRR, plot_main_model_preds_lnRR(data_lnRR, wolf_priors_model_slopes_lnRR)),
tar_target(wolf_priors_model_slopes_plot_slopes_lnRR, plot_main_model_slopes_lnRR(wolf_priors_model_slopes_lnRR)),
tar_target(combined_wolf_priors_model_slopes_plot_lnRR, combine_main_model_plots(wolf_priors_model_slopes_plot_preds_lnRR, wolf_priors_model_slopes_plot_slopes_lnRR)),
tar_target(tidy_wolf_priors_model_slopes_lnRR, get_tidy_model(wolf_priors_model_slopes_lnRR)),
# Fit, check, and plot uninformed model with random slopes included with James Steele's informed priors for Standarised Mean Changes
tar_target(wolf_steele_priors_only_model_lnRR, fit_wolf_steele_priors_only_model_lnRR(data_wolf_lnRR)),
tar_target(wolf_steele_priors_model_lnRR, fit_wolf_steele_priors_model_lnRR(data_wolf_lnRR)),
tar_target(comparison_wolf_steele_priors_lnRR, compare_wolf_steele_priors_lnRR(wolf_steele_priors_only_model_lnRR,wolf_steele_priors_model_lnRR)),
tar_target(steele_priors_lnRR, set_steele_priors_lnRR()),
tar_target(steele_priors_only_model_lnRR, fit_steele_priors_only_model_lnRR(data_lnRR, steele_priors_lnRR)),
tar_target(steele_priors_plot_lnRR, sample_and_plot_priors_lnRR(steele_priors_only_model_lnRR)),
tar_target(steele_priors_model_lnRR, fit_steele_priors_model_lnRR(data_lnRR, steele_priors_lnRR)),
tar_target(rhat_steele_priors_model_lnRR, make_rhat_plot(steele_priors_model_lnRR)),
tar_target(trace_plot_steele_priors_model_lnRR, make_trace_plot(steele_priors_model_lnRR)),
tar_target(pp_check_steele_priors_model_lnRR, make_pp_check(steele_priors_model_lnRR)),
tar_target(steele_priors_model_plot_preds_lnRR, plot_main_model_preds_lnRR(data_lnRR, steele_priors_model_lnRR)),
tar_target(steele_priors_model_plot_slopes_lnRR, plot_main_model_slopes_lnRR(steele_priors_model_lnRR)),
tar_target(combined_steele_priors_model_plot_lnRR, combine_main_model_plots(steele_priors_model_plot_preds_lnRR, steele_priors_model_plot_slopes_lnRR)),
tar_target(tidy_steele_priors_model_lnRR, get_tidy_model(steele_priors_model_lnRR)),
# Fit, check, and plot uninformed model with random slopes included with other authors informed priors for Standarised Mean Changes
tar_target(authors_priors_lnRR, set_authors_priors_lnRR()),
tar_target(authors_priors_only_model_lnRR, fit_authors_priors_only_model_lnRR(data_lnRR, authors_priors_lnRR)),
tar_target(authors_priors_plot_lnRR, sample_and_plot_priors_lnRR(authors_priors_only_model_lnRR)),
tar_target(authors_priors_model_lnRR, fit_authors_priors_model_lnRR(data_lnRR, authors_priors_lnRR)),
tar_target(rhat_authors_priors_model_lnRR, make_rhat_plot(authors_priors_model_lnRR)),
tar_target(trace_plot_authors_priors_model_lnRR, make_trace_plot(authors_priors_model_lnRR)),
tar_target(pp_check_authors_priors_model_lnRR, make_pp_check(authors_priors_model_lnRR)),
tar_target(authors_priors_model_plot_preds_lnRR, plot_main_model_preds_lnRR(data_lnRR, authors_priors_model_lnRR)),
tar_target(authors_priors_model_plot_slopes_lnRR, plot_main_model_slopes_lnRR(authors_priors_model_lnRR)),
tar_target(combined_authors_priors_model_plot_lnRR, combine_main_model_plots(authors_priors_model_plot_preds_lnRR, authors_priors_model_plot_slopes_lnRR)),
tar_target(tidy_authors_priors_model_lnRR, get_tidy_model(authors_priors_model_lnRR)),
# Compare Log Response Ratio Models
tar_target(BF_model_comparisons_plot_lnRR, plot_BF_model_comparisons(wolf_priors_model_lnRR,
uninformed_model_lnRR,
wolf_priors_model_slopes_lnRR,
steele_priors_model_lnRR,
authors_priors_model_lnRR)),
# Make plot tiffs
tar_target(wolf_priors_plot_SMD_tiff, make_plot_tiff(wolf_priors_plot_SMD, 7.5, 5, "plots/wolf_priors_SMD.tiff")),
tar_target(wolf_priors_model_plot_SMD_tiff, make_plot_tiff(combined_wolf_priors_model_plot_SMD, 10, 5.5, "plots/wolf_priors_model_SMD.tiff")),
tar_target(upper_lower_model_plot_preds_SMD_tiff, make_plot_tiff(upper_lower_model_plot_preds_SMD, 10, 5.5, "plots/upper_lower_model_plot_preds_SMD.tiff")),
tar_target(muscle_model_plot_preds_SMD_tiff, make_plot_tiff(muscle_model_plot_preds_SMD, 10, 5.5, "plots/muscle_model_plot_preds_SMD.tiff")),
tar_target(muscle_action_model_plot_preds_SMD_tiff, make_plot_tiff(muscle_action_model_plot_preds_SMD, 10, 7.5, "plots/muscle_action_model_plot_preds_SMD.tiff")),
tar_target(uninformed_model_plot_SMD_tiff, make_plot_tiff(combined_uninformed_model_plot_SMD, 10, 5.5, "plots/uninformed_model_SMD.tiff")),
tar_target(wolf_priors_model_slopes_plot_SMD_tiff, make_plot_tiff(combined_wolf_priors_model_slopes_plot_SMD, 10, 5.5, "plots/wolf_priors_model_slopes_SMD.tiff")),
tar_target(authors_priors_plot_SMD_tiff, make_plot_tiff(authors_priors_plot_SMD, 7.5, 5, "plots/authors_priors_SMD.tiff")),
tar_target(authors_priors_model_plot_SMD_tiff, make_plot_tiff(combined_authors_priors_model_plot_SMD, 10, 5.5, "plots/authors_priors_model_SMD.tiff")),
tar_target(comparison_wolf_steele_priors_SMD_tiff, make_plot_tiff(comparison_wolf_steele_priors_SMD, 9, 5, "plots/comparison_wolf_steele_priors_SMD.tiff")),
tar_target(steele_priors_plot_SMD_tiff, make_plot_tiff(steele_priors_plot_SMD, 7.5, 5, "plots/steele_priors_SMD.tiff")),
tar_target(steele_priors_model_plot_SMD_tiff, make_plot_tiff(combined_steele_priors_model_plot_SMD, 10, 5.5, "plots/steele_priors_model_SMD.tiff")),
tar_target(BF_model_comparisons_plot_SMD_tiff, make_plot_tiff(BF_model_comparisons_plot_SMD, 10, 5.5, "plots/BF_model_comparisons_plot_SMD.tiff")),
tar_target(wolf_priors_plot_lnRR_tiff, make_plot_tiff(wolf_priors_plot_lnRR, 7.5, 5, "plots/wolf_priors_lnRR.tiff")),
tar_target(wolf_priors_model_plot_lnRR_tiff, make_plot_tiff(combined_wolf_priors_model_plot_lnRR, 10, 5.5, "plots/wolf_priors_model_lnRR.tiff")),
tar_target(upper_lower_model_plot_preds_lnRR_tiff, make_plot_tiff(upper_lower_model_plot_preds_lnRR, 10, 5.5, "plots/upper_lower_model_plot_preds_lnRR.tiff")),
tar_target(muscle_model_plot_preds_lnRR_tiff, make_plot_tiff(muscle_model_plot_preds_lnRR, 10, 5.5, "plots/muscle_model_plot_preds_lnRR.tiff")),
tar_target(muscle_action_model_plot_preds_lnRR_tiff, make_plot_tiff(muscle_action_model_plot_preds_lnRR, 10, 7.5, "plots/muscle_action_model_plot_preds_lnRR.tiff")),
tar_target(uninformed_model_plot_lnRR_tiff, make_plot_tiff(combined_uninformed_model_plot_lnRR, 10, 5.5, "plots/uninformed_model_lnRR.tiff")),
tar_target(wolf_priors_model_slopes_plot_lnRR_tiff, make_plot_tiff(combined_wolf_priors_model_slopes_plot_lnRR, 10, 5.5, "plots/wolf_priors_model_slopes_lnRR.tiff")),
tar_target(authors_priors_plot_lnRR_tiff, make_plot_tiff(authors_priors_plot_lnRR, 7.5, 5, "plots/authors_priors_lnRR.tiff")),
tar_target(authors_priors_model_plot_lnRR_tiff, make_plot_tiff(combined_authors_priors_model_plot_lnRR, 10, 5.5, "plots/authors_priors_model_lnRR.tiff")),
tar_target(comparison_wolf_steele_priors_lnRR_tiff, make_plot_tiff(comparison_wolf_steele_priors_lnRR, 9, 5, "plots/comparison_wolf_steele_priors_lnRR.tiff")),
tar_target(steele_priors_plot_lnRR_tiff, make_plot_tiff(steele_priors_plot_lnRR, 7.5, 5, "plots/steele_priors_lnRR.tiff")),
tar_target(steele_priors_model_plot_lnRR_tiff, make_plot_tiff(combined_steele_priors_model_plot_lnRR, 10, 5.5, "plots/steele_priors_model_lnRR.tiff")),
tar_target(BF_model_comparisons_plot_lnRR_tiff, make_plot_tiff(BF_model_comparisons_plot_lnRR, 10, 5.5, "plots/BF_model_comparisons_plot_lnRR.tiff")),
# Reporting
tar_target(grateful_report, cite_packages(out.dir = ".", cite.tidyverse = TRUE, out.format = "pdf")),
tar_quarto(wolf_priors_model_diagnostic_plots, path = "plots/wolf_priors_model_diagnostic_plots.qmd"),
tar_quarto(uninformed_model_diagnostic_plots, path = "plots/uninformed_model_diagnostic_plots.qmd"),
tar_quarto(wolf_priors_model_slopes_diagnostic_plots, path = "plots/wolf_priors_model_slopes_diagnostic_plots.qmd"),
tar_quarto(steele_priors_model_diagnostic_plots, path = "plots/steele_priors_model_diagnostic_plots.qmd"),
tar_quarto(authors_priors_model_diagnostic_plots, path = "plots/authors_priors_model_diagnostic_plots.qmd")
# tar_quarto(analysis_results, path = "analysis_results.qmd")
)
targets::tar_meta(fields = error, complete_only = TRUE)
# https://stats.stackexchange.com/questions/65898/why-could-centering-independent-variables-change-the-main-effects-with-moderatio
# https://stats.stackexchange.com/questions/417029/mean-centering-interaction-terms#:~:text=The%20coefficient%20for%20a%20centered,interaction%20with%20another%20centered%20variable.&text=So%20centering%20x%20changes%20the,the%20xz%20interaction%20unchanged.
library(tidyverse)
library(janitor)
# https://stats.stackexchange.com/questions/65898/why-could-centering-independent-variables-change-the-main-effects-with-moderatio
# https://stats.stackexchange.com/questions/417029/mean-centering-interaction-terms#:~:text=The%20coefficient%20for%20a%20centered,interaction%20with%20another%20centered%20variable.&text=So%20centering%20x%20changes%20the,the%20xz%20interaction%20unchanged.
library(here)
data <- read.csv(here("data", "ROM_regional_hypertrophy_data.csv"), dec = ",") |>
# clean up names
clean_names() |>
# add code for each arm; note "within" designs have mutliple conditions but a single group
mutate(arm_number = if_else(design == "Within", paste(study_number, design), paste(study_number,group)),
arm_number = as.factor(unclass(factor(unlist(arm_number))))) |>
# add code for effects
rowid_to_column("effect_number") |>
# convert means/sds to numeric
mutate(m_pre = as.numeric(m_pre),
m_post = as.numeric(m_post),
sd_pre = as.numeric(sd_pre),
sd_post = as.numeric(sd_post),
mean_muscle_length = as.numeric(mean_muscle_length)*100
) |>
# rescale muscle length and centre along with site
mutate(mean_muscle_length_centred = (mean_muscle_length-50)/100,
site_centred = (site-50)/100) |>
# add assumed pre-post correlation
mutate(ri = 0.7)
# Calculate standardised effects
data <- escalc(
measure = "ROMC",
m1i = m_post,
m2i = m_pre,
sd1i = sd_post,
sd2i = sd_pre,
ri = ri,
ni = n,
data = data
)
library(metafor)
# Calculate standardised effects
data <- escalc(
measure = "ROMC",
m1i = m_post,
m2i = m_pre,
sd1i = sd_post,
sd2i = sd_pre,
ri = ri,
ni = n,
data = data
)
data <- data |>
# add study weights/sizes
mutate(
wi = 1/sqrt(vi),
size = 0.5 + 3.0 * (wi - min(wi, na.rm=TRUE))/(max(wi, na.rm=TRUE) - min(wi, na.rm=TRUE)))
View(data)
targets::tar_make()
targets::tar_make()
data <- read.csv(here("data", "ROM_regional_hypertrophy_data.csv"), dec = ",") |>
# clean up names
clean_names() |>
# add code for each arm; note "within" designs have mutliple conditions but a single group
mutate(arm_number = if_else(design == "Within", paste(study_number, design), paste(study_number,group)),
arm_number = as.factor(unclass(factor(unlist(arm_number))))) |>
# add code for effects
rowid_to_column("effect_number") |>
# convert means/sds to numeric
mutate(m_pre = as.numeric(m_pre),
m_post = as.numeric(m_post),
sd_pre = as.numeric(sd_pre),
sd_post = as.numeric(sd_post),
mean_muscle_length = as.numeric(mean_muscle_length)*100
) |>
# rescale muscle length and centre along with site
mutate(mean_muscle_length_centred = (mean_muscle_length-50)/100,
site_centred = (site-50)/100) |>
# add assumed pre-post correlation
mutate(ri = 0.7)
data <- read.csv(here("data", "ROM_regional_hypertrophy_data.csv"), dec = ",") |>
# clean up names
clean_names() |>
# add code for each arm; note "within" designs have mutliple conditions but a single group
mutate(arm_number = if_else(design == "Within", paste(study_number, design), paste(study_number,group)),
arm_number = as.factor(unclass(factor(unlist(arm_number))))) |>
# add code for effects
rowid_to_column("effect_number")
?rowid_to_column
data <- read_csv(here("data", "ROM_regional_hypertrophy_data.csv"), dec = ",")
data <- read_csv(here("data", "ROM_regional_hypertrophy_data.csv"))
targets::tar_make()
targets::tar_make()
targets::tar_make()
data <- read.csv(here("data", "ROM_regional_hypertrophy_data.csv"), dec = ",")
janitor::clean_names(data)
targets::tar_make()
targets::tar_make()
targets::tar_load(data_lnRR)
targets::tar_make()
targets::tar_make()
renv::status()
targets::tar_make()
data <- read.csv(here("data", "ROM_regional_hypertrophy_data.csv"), dec = ",") |>
# clean up names
janitor::clean_names()
View(data)
targets::tar_make()
targets::tar_make()
