bayestestR::rope(filter(slopes, site_centred == 0.25)$draw/2, range = c(-0.1, 0.1), ci = 1)$ROPE_Percentage
),
pd = c(
1-bayestestR::p_direction(filter(slopes, site_centred == -0.25)$draw/2, null = 0.1, ci = 1)$pd,
1-bayestestR::p_direction(filter(slopes, site_centred == 0)$draw/2,  null = 0.1, ci = 1)$pd,
1-bayestestR::p_direction(filter(slopes, site_centred == 0.25)$draw/2,  null = 0.1, ci = 1)$pd
)
)
slopes |>
ggplot(aes(x = (site_centred*100)+50, y = draw/2)) +
geom_hline(yintercept = 0, linetype = "dotted", alpha = 0.75) +
geom_hline(yintercept = c(-0.1,0.1), linetype = "dashed") +
stat_slabinterval(aes(fill = (site_centred*100)+50), alpha = 0.75) +
# add mean and qi
annotate("text", (summary$site_centred*100)+45, summary$estimate/2, label = round(summary$estimate/2,2), size = 3) +
annotate("text", (summary$site_centred*100)+45, summary$conf.low/2, label = round(summary$conf.low/2,2), size = 3) +
annotate("text", (summary$site_centred*100)+45, summary$conf.high/2, label = round(summary$conf.high/2,2), size = 3) +
# add percent in rope
annotate("rect", xmin = 10, xmax = 90, ymin = -1.125, ymax = -0.825, color = "black", fill = "white") +
annotate("text", (rope_percents$site_centred*100)+50, 0.9, label = glue::glue("{round(rope_percents$rope_percent*100,2)}%"), size = 3) +
annotate("text", x=50, y=1.05, label="Percentage of Posterior Distibution Within ROPE [-0.1,0.1]", size = 3) +
# add probability of positive effect
annotate("rect", xmin = 10, xmax = 90, ymin = 0.825, ymax = 1.125, color = "black", fill = "white") +
annotate("text", (rope_percents$site_centred*100)+50, 0.9, label = glue::glue("{round(rope_percents$pd*100,2)}%"), size = 3) +
annotate("text", x=50, y=1.05, label="Probability of Meaningful Positive Effect (i.e., >0.1)", size = 3) +
scale_fill_viridis_c() +
scale_x_continuous(breaks = c(0,25,50,75,100), limits = c(0,100)) +
scale_y_continuous(breaks = c(-1,-0.75,-0.5,-0.25,0,0.25,0.5,0.75,1), limits = c(-1.15,1.15)) +
guides(
color = "none"
) +
labs(
x = "Site of Measurement (%)",
y = "Slope for Muscle Length",
fill = "Site of Measurement (%)"
) +
theme_classic() +
theme(panel.border = element_rect(fill = NA),
axis.title = element_text(size=10))
slopes |>
ggplot(aes(x = (site_centred*100)+50, y = draw/2)) +
geom_hline(yintercept = 0, linetype = "dotted", alpha = 0.75) +
geom_hline(yintercept = c(-0.1,0.1), linetype = "dashed") +
stat_slabinterval(aes(fill = (site_centred*100)+50), alpha = 0.75) +
# add mean and qi
annotate("text", (summary$site_centred*100)+45, summary$estimate/2, label = round(summary$estimate/2,2), size = 3) +
annotate("text", (summary$site_centred*100)+45, summary$conf.low/2, label = round(summary$conf.low/2,2), size = 3) +
annotate("text", (summary$site_centred*100)+45, summary$conf.high/2, label = round(summary$conf.high/2,2), size = 3) +
# add percent in rope
annotate("rect", xmin = 10, xmax = 90, ymin = -1.125, ymax = -0.825, color = "black", fill = "white") +
annotate("text", (rope_percents$site_centred*100)+50, 0.9, label = glue::glue("{round(rope_percents$rope_percent*100,2)}%"), size = 3) +
annotate("text", x=50, y=1.05, label="Percentage of Posterior Distibution Within ROPE [-0.1,0.1]", size = 3) +
# add probability of positive effect
annotate("rect", xmin = 10, xmax = 90, ymin = 0.825, ymax = 1.125, color = "black", fill = "white") +
annotate("text", (rope_percents$site_centred*100)+50, -1.05, label = glue::glue("{round(rope_percents$pd*100,2)}%"), size = 3) +
annotate("text", x=50, y=-0.9, label="Probability of Meaningful Positive Effect (i.e., >0.1)", size = 3) +
scale_fill_viridis_c() +
scale_x_continuous(breaks = c(0,25,50,75,100), limits = c(0,100)) +
scale_y_continuous(breaks = c(-1,-0.75,-0.5,-0.25,0,0.25,0.5,0.75,1), limits = c(-1.15,1.15)) +
guides(
color = "none"
) +
labs(
x = "Site of Measurement (%)",
y = "Slope for Muscle Length",
fill = "Site of Measurement (%)"
) +
theme_classic() +
theme(panel.border = element_rect(fill = NA),
axis.title = element_text(size=10))
slopes |>
ggplot(aes(x = (site_centred*100)+50, y = draw/2)) +
geom_hline(yintercept = 0, linetype = "dotted", alpha = 0.75) +
geom_hline(yintercept = c(-0.1,0.1), linetype = "dashed") +
stat_slabinterval(aes(fill = (site_centred*100)+50), alpha = 0.75) +
# add mean and qi
annotate("text", (summary$site_centred*100)+45, summary$estimate/2, label = round(summary$estimate/2,2), size = 3) +
annotate("text", (summary$site_centred*100)+45, summary$conf.low/2, label = round(summary$conf.low/2,2), size = 3) +
annotate("text", (summary$site_centred*100)+45, summary$conf.high/2, label = round(summary$conf.high/2,2), size = 3) +
# add percent in rope
annotate("rect", xmin = 10, xmax = 90, ymin = -1.125, ymax = -0.825, color = "black", fill = "white") +
annotate("text", (rope_percents$site_centred*100)+50, -1.05, label = glue::glue("{round(rope_percents$rope_percent*100,2)}%"), size = 3) +
annotate("text", x=50, y=-0.9, label="Percentage of Posterior Distibution Within ROPE [-0.1,0.1]", size = 3) +
# add probability of positive effect
annotate("rect", xmin = 10, xmax = 90, ymin = 0.825, ymax = 1.125, color = "black", fill = "white") +
annotate("text", (rope_percents$site_centred*100)+50, 0.9, label = glue::glue("{round(rope_percents$pd*100,2)}%"), size = 3) +
annotate("text", x=50, y=1.05, label="Probability of Meaningful Positive Effect (i.e., >0.1)", size = 3) +
scale_fill_viridis_c() +
scale_x_continuous(breaks = c(0,25,50,75,100), limits = c(0,100)) +
scale_y_continuous(breaks = c(-1,-0.75,-0.5,-0.25,0,0.25,0.5,0.75,1), limits = c(-1.15,1.15)) +
guides(
color = "none"
) +
labs(
x = "Site of Measurement (%)",
y = "Slope for Muscle Length",
fill = "Site of Measurement (%)"
) +
theme_classic() +
theme(panel.border = element_rect(fill = NA),
axis.title = element_text(size=10))
targets::tar_make()
bayestestR::p_direction(filter(slopes, site_centred == 0)$draw/2,  null = 0.1, ci = 1)$pd
bayestestR::rope(filter(slopes, site_centred == 0)$draw/2, range = 0.1, ci = 1)$ROPE_Percentage,
bayestestR::rope(filter(slopes, site_centred == 0)$draw/2, range = 0.1, ci = 1)$ROPE_Percentage
bayestestR::rope(filter(slopes, site_centred == 0)$draw/2, range = c(0.1, Inf), ci = 1)$ROPE_Percentage
targets::tar_make()
0.34/0.1
0.1/0.34
0.3*0.0525
0.01575/2
library(tidyverse)
library(janitor)
library(metafor)
library(brms)
library(tidybayes)
library(marginaleffects)
library(patchwork)
library(bayestestR)
0.0525/0.34
0.34/0.0525
0.15*0.04
0.05*0.15
mode_hdi(rskew_normal(
1e6,
mu = 0.006,
sigma = 0.0075,
alpha = 5
))
x <- seq(-0.2, 0.2, length=1000)
plot(x,
dskew_normal(
x,
mu = 0.04,
sigma = 0.05,
alpha = 5
))
plot(x,
dskew_normal(
x,
mu = 0.006,
sigma = 0.0075,
alpha = 5
))
x <- seq(-0.1, 0.1, length=1000)
plot(x,
dskew_normal(
x,
mu = 0.006,
sigma = 0.0075,
alpha = 5
))
x <- seq(-0.05, 0.05, length=1000)
plot(x,
dskew_normal(
x,
mu = 0.006,
sigma = 0.0075,
alpha = 5
))
mode_hdi(rskew_normal(
1e6,
mu = 0.006,
sigma = 0.0075,
alpha = 6
))
plot(x,
dskew_normal(
x,
mu = 0.006,
sigma = 0.0075,
alpha = 6
))
mode_hdi(rskew_normal(
1e6,
mu = 0.006,
sigma = 0.005,
alpha = 5
))
plot(x,
dskew_normal(
x,
mu = 0.006,
sigma = 0.005,
alpha = 6
))
plot(x,
dskew_normal(
x,
mu = 0.0006,
sigma = 0.005,
alpha = 6
))
plot(x,
dskew_normal(
x,
mu = 0.003,
sigma = 0.005,
alpha = 6
))
mode_hdi(rskew_normal(
1e6,
mu = 0.003,
sigma = 0.005,
alpha = 5
))
mode_hdi(rskew_normal(
1e6,
mu = 0.003,
sigma = 0.005,
alpha = 6
))
mode_hdi(rskew_normal(
1e6,
mu = 0.003,
sigma = 0.006,
alpha = 6
))
plot(x,
dskew_normal(
x,
mu = 0.003,
sigma = 0.006,
alpha = 6
))
plot(x,
dskew_normal(
x,
mu = 0.003,
sigma = 0.006,
alpha = 5
))
mode_hdi(rskew_normal(
1e6,
mu = 0.003,
sigma = 0.006,
alpha = 5
))
plot(
x,
dstudent_t(x, 3, 0, 0.002)
)
plot(
x,
dstudent_t(x, 3, 0, 0.02)
)
plot(
x,
dstudent_t(x, 3, 0, 0.005)
)
plot(
x,
dstudent_t(x, 3, 0, 0.0025)
)
plot(
x,
dnorm(x, 0.05, 0.01)
)
x <- seq(-0.1, 0.1, length=1000)
plot(
x,
dnorm(x, 0.05, 0.01)
)
plot(
x,
dnorm(x, 0.05, 0.02)
)
log(3)
log(0.03)
103/100
log(1.03)
log(1.5)/log(1.22)
log(1.05)/log(1.22)
log(1.1)
targets::tar_visnetwork()
targets::tar_make()
targets::tar_make()
targets::tar_make()
targets::tar_load(data_lnRR)
range(data_lnRR$yi)
targets::tar_load(steele_priors_model_lnRR)
# Interaction plot
preds <- crossing(
mean_muscle_length_centred = seq(-0.35, 0.35, length = 101),
site_centred = c(-0.25,0,0.25),
vi = 0
) |>
add_epred_draws(model, re_formula = NA)
library(brms)
steele_priors_model_lnRR
VarCorr(steele_priors_model_lnRR)
var_cor <- VarCorr(steele_priors_model_lnRR)
var_cor$arm_number$sd
View(var_cor)
var_cor$study_number$sd
unnest(var_cor)
unnest(var_cor, cols = c(arm_number, effect_number, study_number))
unlist(var_cor)
var_cor_all <- unlist(var_cor)
as.data.frame(var_cor_all)
as.data.frame(unlist(VarCorr(steele_priors_model_lnRR)))
as.data.frame(unlist(VarCorr(steele_priors_model_lnRR))) |>
rowid_to_column("variable")
as.data.frame(unlist(VarCorr(steele_priors_model_lnRR))) |>
rowname_to_column("variable")
as.data.frame(unlist(VarCorr(steele_priors_model_lnRR))) |>
rownames_to_column("variable")
as.data.frame(setNames(unlist(steele_priors_model_lnRR, use.names=F),rep(names(steele_priors_model_lnRR), lengths(steele_priors_model_lnRR)))) |>
rownames_to_column("variable")
as.data.frame(setNames(unlist(VarCorr(steele_priors_model_lnRR), use.names=F),rep(names(VarCorr(steele_priors_model_lnRR)), lengths(VarCorr(steele_priors_model_lnRR))))) |>
rownames_to_column("variable")
as.data.frame(setNames(unlist(VarCorr(steele_priors_model_lnRR), use.names=F),rep(names(VarCorr(steele_priors_model_lnRR)), lengths(VarCorr(steele_priors_model_lnRR)))))
VarCorr(steele_priors_model_lnRR,
summary = FALSE)
VarCorr(steele_priors_model_lnRR)
plot(
x,
dstudent_t(x, 3, 0.275-0.15, 0.0025)
)
x <- seq(-0.1, 0.1, length=1000)
plot(
x,
dstudent_t(x, 3, 0.275-0.15, 0.0025)
)
x <- seq(-0.1, 0.4, length=1000)
t
plot(
x,
dstudent_t(x, 3, 0.275-0.15, 0.0025)
)
plot(
x,
dstudent_t(x, 3, 0.275-0.15, 0.02)
)
0.275-0.15
plot(
x,
dstudent_t(x, 3, 0.275-0.15, 0.05)
)
plot(
x,
dstudent_t(x, 3, 0.275-0.15, 0.025)
)
plot(
x,
dstudent_t(x, 3, 0.275-0.15, 0.03)
)
plot(
x,
dstudent_t(x, 3, 0.275-0.15, 0.04)
)
plot(
x,
dstudent_t(x, 3, 0.275-0.15, 0.05)
)
VarCorr(steele_priors_model_lnRR)
var_cor$arm_number$sd$estimate
var_cor$arm_number$sd
var_cor$arm_number$sd[1]
var_cor$arm_number$sd[1] + var_cor$effect_number$sd[1]
var_cor$effect_number$sd
var_cor$study_number$sd
var_cor$study_number$sd[1,1:3]
var_cor$study_number$sd[1:3,1]
var_cor$arm_number$sd[1] + var_cor$effect_number$sd[1] + var_cor$study_number$sd[1:3,1]
var_cor$arm_number$sd[1] + var_cor$effect_number$sd[1]
var_cor$arm_number$sd[1]
var_cor$effect_number$sd[1]
var_cor$study_number$sd[1:3,1]
var_cor$study_number$sd[1,1]
var_cor$study_number$sd[2,1]
var_cor$arm_number$sd[1] + var_cor$effect_number$sd[1] + var_cor$study_number$sd[1,1] + var_cor$study_number$sd[2,1] + var_cor$study_number$sd[3,1]
0.17705403      +           0.12697781       +          0.08919368
plot(
x,
dstudent_t(x, 3, 0.2, 0.05)
)
x <- seq(-0.1, 0.6, length=1000)
plot(
x,
dstudent_t(x, 3, 0.2, 0.05)
)
plot(
x,
dstudent_t(x, 3, 0.2, 0.1)
)
x <- seq(-0.2, 0.6, length=1000)
plot(
x,
dstudent_t(x, 3, 0.2, 0.1)
)
targets::tar_load(main_model_lnRR)
var_cor <- VarCorr(main_model_lnRR)
total_var <- var_cor$arm_number$sd[1] + var_cor$effect_number$sd[1] + var_cor$study_number$sd[1,1] + var_cor$study_number$sd[2,1] + var_cor$study_number$sd[3,1]
var_cor
length(var_cor$study_number$sd)
row_number(var_cor$study_number$sd)
var_cor$study_number$sd
var_cor <- VarCorr(steele_priors_model_lnRR)
row_number(var_cor$study_number$sd)
legnth(var_cor$study_number$sd)
length(var_cor$study_number$sd)
var_cor <- VarCorr(steele_priors_model_lnRR)
if (length(var_cor$study_number$sd) == 12) {
total_var <- var_cor$arm_number$sd[1] + var_cor$effect_number$sd[1] + var_cor$study_number$sd[1,1] + var_cor$study_number$sd[2,1] + var_cor$study_number$sd[3,1]
} else {
total_var <- var_cor$arm_number$sd[1] + var_cor$effect_number$sd[1] + var_cor$study_number$sd[1,1]
}
total_var
var_cor <- VarCorr(main_model_lnRR)
if (length(var_cor$study_number$sd) == 12) {
total_var <- var_cor$arm_number$sd[1] + var_cor$effect_number$sd[1] + var_cor$study_number$sd[1,1] + var_cor$study_number$sd[2,1] + var_cor$study_number$sd[3,1]
} else {
total_var <- var_cor$arm_number$sd[1] + var_cor$effect_number$sd[1] + var_cor$study_number$sd[1,1]
}
total_var
100*(exp(-0.09531018+0.5*total_var)-1)
100*(exp(0.11+0.5*total_var)-1)
100*(exp(-0.080.11+0.5*total_var)-1)
100*(exp(0.08+0.5*total_var)-1)
range(100*(exp(data_lnRR$yi+0.5*total_var)-1))
1.125-0.825
targets::tar_make()
c(100*(exp(-0.09531018+0.5*total_var)-1),100*(exp(0.09531018+0.5*total_var)-1))
100*(exp(-0.09531018+0.5*total_var)-1)
100*(exp(0.09531018+0.5*total_var)-1)
c(-100*(exp(0.09531018+0.5*total_var)-1),100*(exp(0.09531018+0.5*total_var)-1))
0.9/1.125
0.8*62.5
1.05/1.125
62.5*0.9333333
targets::tar_make()
1.125-0.825
0.3/1.125
62.5*0.2666667
62.5-16.66667
plot(
x,
dstudent_t(x, 3, 0.2, 0.1, lb=0)
)
?dstudent_t
plot(
x,
dstudent_t(x, 3, 0.2, 0.1, lower.tail=0)
)
plot(
x,
brms::dstudent_t(x, 3, 0.2, 0.1, lower.tail=0)
)
0.0235-0.0166
0.0325-0.02325
0.00925/1.96
0.0125/1.96
0.0114/1.93
.0114/1.96
exp(0.07)
targets::tar_make()
targets::tar_make()
var(data_lnRR$yi)
targets::tar_make()
x <- seq(-0.05, 0.1, length=1000)
plot(x,
dskew_normal(
x,
mu = 0.003,
sigma = 0.006,
alpha = 5
))
exp(0.003)
100*(exp(0.003)-1)
targets::tar_load(steele_priors_model_lnRR)
steele_priors_model_lnRR
100*exp(0.06)-1)
100*exp(0.06)-1))
100*(exp(0.06)-1)
targets::tar_load(main_model_lnRR)
main_model_lnRR
targets::tar_load(tidy_steele_priors_model_lnRR)
tidy_steele_priors_model_lnRR
100*(exp(0.00791)-1)
total_var
100*(exp(0.00791+0.5*total_var)-1)
100*(exp(0.00791+(0.5*total_var))-1)
var_cor <- VarCorr(main_model_lnRR)
if (length(var_cor$study_number$sd) == 12) {
total_var <- var_cor$arm_number$sd[1] + var_cor$effect_number$sd[1] + var_cor$study_number$sd[1,1] + var_cor$study_number$sd[2,1] + var_cor$study_number$sd[3,1]
} else {
total_var <- var_cor$arm_number$sd[1] + var_cor$effect_number$sd[1] + var_cor$study_number$sd[1,1]
}
total_var
total_var <- var(data_lnRR$yi)
total_var
100*(exp(0.00791+0.5*total_var)-1)
var_cor <- VarCorr(main_model_lnRR)
if (length(var_cor$study_number$sd) == 12) {
total_var <- var_cor$arm_number$sd[1] + var_cor$effect_number$sd[1] + var_cor$study_number$sd[1,1] + var_cor$study_number$sd[2,1] + var_cor$study_number$sd[3,1]
} else {
total_var <- var_cor$arm_number$sd[1] + var_cor$effect_number$sd[1] + var_cor$study_number$sd[1,1]
}
total_var
total_var^2
100*(exp(0.00791+0.5*total_var^2)-1)
total_var <- data_lnRR |>
var(yi)
targets::tar_make()
targets::tar_make()
targets::tar_make()
targets::tar_make()
seq(-0.05,0.1, length = 6)
seq(-0.05,0.1, length = 5)
targets::tar_make()
targets::tar_make()
